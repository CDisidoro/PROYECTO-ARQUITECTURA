if (self.CavalryLogger) { CavalryLogger.start_js(["wV29r"]); }

__d("MercuryAttachmentConstants",[],(function a(b,c,d,e,f,g){var h=Object.freeze({SIDE_LENGTH:9});f.exports=h}),null);
__d("ChatImageArrowDirection",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({BOTH:null,LEFT:null,RIGHT:null});f.exports=h}),null);
__d("ChatImageWithArrow.react",["cx","ChatImageArrowDirection","CssBackgroundImage.react","Link.react","MercuryAttachmentConstants","React","XUISpinner.react","cssURL","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=30,m=15;i=babelHelpers.inherits(n,c("React").Component);j=i&&i.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$ChatImageWithArrow3=function(){return Math.max(this.props.width,m)}.bind(this),this.$ChatImageWithArrow6=function(){return Math.max(this.props.height,l)}.bind(this),this.$ChatImageWithArrow7=function(t,u,v,w){if(u===c("ChatImageArrowDirection").LEFT)return"translate("+v+"px, "+w+"px)rotate(45deg)";else return"translate("+(t-v)+"px, "+w+"px)rotate(45deg)"},this.$ChatImageWithArrow8=function(t,u,v,w){if(u===c("ChatImageArrowDirection").LEFT)return"rotate(-45deg)translate(-"+(this.$ChatImageWithArrow1+v)+"px,-"+w+"px)";else return"rotate(-45deg)translate(-"+(t-v)+"px, -"+w+"px)"}.bind(this),p}n.prototype.render=function(){this.$ChatImageWithArrow1=Math.floor(this.props.sideLength/Math.sqrt(2));this.$ChatImageWithArrow2=Math.ceil(this.$ChatImageWithArrow3()+this.$ChatImageWithArrow1);if(this.props.isLoading)return this.$ChatImageWithArrow4();var o=c("joinClasses")("_4yp6"+(this.props.round?" _3lk2":""),this.props.rootClassName);return this.$ChatImageWithArrow5(c("React").createElement("div",{className:o},c("React").createElement("div",{className:"_52kr"+(this.props.round?" _3_om":""),style:{width:this.$ChatImageWithArrow3(),height:this.$ChatImageWithArrow6()}},c("React").createElement(c("CssBackgroundImage.react"),{className:"_4yp9"+(this.props.isSpherical?" _3603":""),imageURI:this.props.source,backgroundPosition:"center",style:{width:this.$ChatImageWithArrow3(),height:this.$ChatImageWithArrow6(),borderRadius:"inherit"}},this.props.isSpherical?c("React").createElement("div",{className:"_64ks"}):null))))};n.prototype.$ChatImageWithArrow5=function(o){if(this.props.onClick)return c("React").createElement(c("Link.react"),{onClick:this.props.onClick},o);return o};n.prototype.$ChatImageWithArrow4=function(){__p&&__p();var o={width:this.props.sideLength,height:this.props.sideLength};if(this.props.source)o.backgroundImage=c("cssURL")(this.props.source);var p={width:this.props.sideLength,height:this.props.sideLength};if(this.props.source)p.opacity=0;var q={width:this.$ChatImageWithArrow3(),height:this.$ChatImageWithArrow6()};if(this.props.source){q.backgroundImage=c("cssURL")(this.props.source);q.backgroundSize="cover"}return c("React").createElement("div",{className:"_4yp6"},c("React").createElement("div",{className:"_4ypb _3_om",style:q},c("React").createElement(c("XUISpinner.react"),{size:"small"})))};n.propTypes={arrowDirection:k.oneOf(Object.keys(c("ChatImageArrowDirection"))),onClick:k.func,height:k.number.isRequired,isLoading:k.bool,isSpherical:k.bool,round:k.bool,rootClassName:k.string,sideLength:k.number,source:k.string,width:k.number.isRequired};n.defaultProps={sideLength:c("MercuryAttachmentConstants").SIDE_LENGTH,isLoading:false,isSpherical:false,round:false};f.exports=n}),null);
__d("MessengerAttachmentImageBlockUtils",["isFacebookURI","isLinkshimURI"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(k){return k.getPath().indexOf("/moments_app")===0}function i(k,l){return k<=300&&l<=300}function j(k,l,m){if(i(k,l))return true;return c("isFacebookURI")(m)&&!c("isLinkshimURI")(m)&&!h(m)}f.exports={isIcon:j}}),null);
__d("MessengerAttachmentImageBlock.react",["cx","React","StoryAttachmentStyle","URI","cssURL","gkx","joinClasses","MessengerAttachmentImageBlockUtils"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){return c("React").createElement("div",{className:c("joinClasses")(this.props.className,this.$MessengerAttachmentImageBlock1())},this.$MessengerAttachmentImageBlock2(),c("React").createElement("div",{className:"_5swm"},this.props.children))};l.prototype.$MessengerAttachmentImageBlock2=function(){if(!this.props.attachment.media||!this.props.attachment.media.image)return null;var m=this.$MessengerAttachmentImageBlock3(),n=m.height,o=m.width,p=n>o,q=new(c("URI"))(this.props.attachment.uri),r=c("MessengerAttachmentImageBlockUtils").isIcon(n,o,q),s=n&&o?n/o*100:100,t=p||r?.2:1,u=p||r?s:52,v={backgroundImage:c("cssURL")(this.props.attachment.media.image),minHeight:"0px",paddingBottom:p&&s>150?"136px":u*t+"%"};if(this.props.attachment.description&&this.props.attachment.source)v.minHeight="112px";return c("React").createElement("div",{className:"_3xn1",style:v})};l.prototype.$MessengerAttachmentImageBlock1=function(){if(!this.props.attachment.media||!this.props.attachment.media.image)return"_3xn3 _5swn";var m=this.$MessengerAttachmentImageBlock3(),n=m.height,o=m.width,p=n>o,q=new(c("URI"))(this.props.attachment.uri),r=c("MessengerAttachmentImageBlockUtils").isIcon(n,o,q);return"_3xn3"+(r&&!p?" _3xn5":"")+(p?" _3xn6":"")+(o>=n&&!r?" _3xn7":"")+(c("gkx")("AT5jVqghs9R-Nalfuant-OpQGexKpV-Lvk0zsjcgyNeCAPkQFy-F7Ku4x6WSSnQxEXUiMEmPIqbnxuBACYn4sSsR")&&this.$MessengerAttachmentImageBlock4()?" _2e9e":"")};l.prototype.$MessengerAttachmentImageBlock4=function(){var m=this.props.attachment.style_list;return Array.isArray(m)&&m[0]==c("StoryAttachmentStyle").LIGHTWEIGHT_ACTION};l.prototype.$MessengerAttachmentImageBlock5=function(){var m=this.props.attachment.properties;if(!m||!m.height||!m.width)return null;return{height:m.height,width:m.width}};l.prototype.$MessengerAttachmentImageBlock3=function(){var m=this.$MessengerAttachmentImageBlock5()||this.props.attachment.media.image_size||{},n=m.height,o=m.width;if(n&&o){n=parseInt(n,10);o=parseInt(o,10);return{height:n,width:o}}return{height:0,width:0}};function l(){i.apply(this,arguments)}l.propTypes={attachment:k.object.isRequired};f.exports=l}),null);
__d("MercuryShareImage.react",["cx","ChatImageArrowDirection","ChatImageWithArrow.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){return c("React").createElement("div",{className:"_4hsl"},c("React").createElement(c("ChatImageWithArrow.react"),{arrowDirection:c("ChatImageArrowDirection").BOTH,height:this.props.height,round:!!this.props.round,source:this.props.source,width:this.props.width}))};function l(){i.apply(this,arguments)}l.propTypes={height:k.number.isRequired,round:k.bool,source:k.string.isRequired,width:k.number.isRequired};f.exports=l}),null);
__d("MercuryFallbackShareAttachmentTextBlock.react",["cx","LineClamp.react","MercuryShareAttachmentRenderLocations","MercuryShareAttachmentReactShape","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){if(!this.props||!this.props.attachment)return c("React").createElement("div",{className:"__6j"});if(c("MercuryShareAttachmentRenderLocations").MESSENGER===this.props.location)return c("React").createElement("div",{className:"__6j"},this.renderMessengerTitle(),this.renderMessengerDescription(),this.renderMessengerSource());return c("React").createElement("div",{className:"__6j"},this.renderTitle(),this.renderDescription(),this.renderSource(),this.props.extraComponent)};l.prototype.renderMessengerTitle=function(){if(!this.props.attachment.title)return null;return c("React").createElement("div",{className:"__6k"},c("React").createElement(c("LineClamp.react"),{customEllipsis:" ",lines:2,lineHeight:18},this.props.attachment.title))};l.prototype.renderMessengerDescription=function(){if(!this.props.attachment.description)return null;return c("React").createElement("div",{className:"__6l"},c("React").createElement(c("LineClamp.react"),{customEllipsis:" ",lines:2,lineHeight:16},this.props.attachment.description))};l.prototype.renderMessengerSource=function(){if(!this.props.attachment.source)return null;return c("React").createElement("div",{className:"__6m"},this.props.attachment.source)};l.prototype.renderTitle=function(){if(!this.props.attachment.title)return null;return c("React").createElement("div",{className:"__6k"+(!this.props.attachment.uri&&!this.props.attachment.description||this.props.attachment.target!=null&&this.props.attachment.target.lwa_type!=null&&this.props.attachment.target.lwa_state==="INITIATED"?" _2xsq":"")+(!!this.props.extraComponent?" _1dw9":"")},this.props.attachment.title)};l.prototype.renderDescription=function(){if(!this.props.attachment.description)return null;return c("React").createElement("div",{className:"__6l"},this.props.attachment.description)};l.prototype.renderSource=function(){if(!this.props.attachment.source)return null;return c("React").createElement("div",{className:"__6m"},this.props.attachment.source)};function l(){i.apply(this,arguments)}l.propTypes={attachment:c("MercuryShareAttachmentReactShape"),extraComponent:k.object,location:k.oneOf(c("MercuryShareAttachmentRenderLocations").getValues())};f.exports=l}),null);
__d("MercuryFallbackShareAttachmentContent.react",["cx","Image.react","ImageBlock.react","MercuryFallbackShareAttachmentTextBlock.react","MercuryShareAttachmentRenderLocations","MercuryShareAttachmentReactShape","MercuryShareImage.react","MessengerAttachmentImageBlock.react","React","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=72;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;m.prototype.renderTextBlock=function(){return c("React").createElement(c("MercuryFallbackShareAttachmentTextBlock.react"),this.props)};m.prototype.renderChatImage=function(n){return c("React").createElement(c("ImageBlock.react"),{className:n,spacing:"medium"},c("React").createElement(c("MercuryShareImage.react"),{height:l,source:this.props.attachment.media.image,width:l}),c("React").createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",height:l}},this.renderTextBlock()))};m.prototype.renderMessengerImage=function(n){return c("React").createElement(c("MessengerAttachmentImageBlock.react"),{className:n,attachment:this.props.attachment},this.renderTextBlock(),this.props.children)};m.prototype.renderDefaultImage=function(n){return c("React").createElement(c("ImageBlock.react"),{className:c("joinClasses")(this.props.className,n)},c("React").createElement(c("Image.react"),{className:"__6n",src:this.props.attachment.media.image,width:l}),this.renderTextBlock(),this.props.children)};m.prototype.getCSSClasses=function(){var n=this.props.attachment,o=this.props.location;return(c("MercuryShareAttachmentRenderLocations").CHAT===o?"_49or":"")+(c("MercuryShareAttachmentRenderLocations").CHAT_PREVIEW===o?" _324d":"")+(c("MercuryShareAttachmentRenderLocations").CHAT!==o?" _tih":"")+(!(n&&n.media.image)?" _49ou":"")+" _310t"};m.prototype.render=function(){var n=this.props.attachment,o=this.props.location,p=this.getCSSClasses();if(n.media&&n.media.image){if(c("MercuryShareAttachmentRenderLocations").CHAT===o||c("MercuryShareAttachmentRenderLocations").CHAT_PREVIEW===o)return this.renderChatImage(p);else if(c("MercuryShareAttachmentRenderLocations").MESSENGER===o)return this.renderMessengerImage(p);return this.renderDefaultImage(p)}return c("React").createElement("div",{className:c("joinClasses")(this.props.className,p)},this.renderTextBlock(),this.props.children)};function m(){i.apply(this,arguments)}m.propType={attachment:c("MercuryShareAttachmentReactShape"),location:k.oneOf(c("MercuryShareAttachmentRenderLocations").getValues())};f.exports=m}),null);
__d("SaveMessageUtils",["immutable","StoryAttachmentStyle"],(function a(b,c,d,e,f,g){var h=c("immutable").Set.of(c("StoryAttachmentStyle").FALLBACK,c("StoryAttachmentStyle").SHARE,c("StoryAttachmentStyle").EVENT,c("StoryAttachmentStyle").ATTACHED_STORY,c("StoryAttachmentStyle").MUSIC_AGGREGATION,c("StoryAttachmentStyle").AVATAR),i={isSavableMessageAttachment:function j(k){for(var l=0;l<k.length;l++)if(!h.has(k[l]))return false;return true}};f.exports=i}),null);
__d("XMessengerDotComSavedForLaterNuxSeenController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/save/savemessagenux/",{})}),null);
__d("MercuryFallbackShareAttachment.react",["cx","fbt","AsyncRequest","CollectionsDisplaySurface","CollectionCurationMechanisms","Link.react","MercuryFallbackShareAttachmentContent.react","MercuryShareAttachmentRenderLocations","MercuryShareAttachmentReactShape","MessengerAdsWebTypedLogger","MessengerDotComSaveModule","MNAdsLoggerEventEnum","React","ReactFragment","SaveMessageUtils","XMessengerDotComSavedForLaterNuxSeenController","XUIAmbientNUX.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m="focus",n="click",o="scroll",p=1e4,q=3e4;j=babelHelpers.inherits(r,c("React").Component);k=j&&j.prototype;function r(){k.constructor.call(this);this.state={showNux:false,nuxDisabled:false}}r.prototype.renderLink=function(s){if(c("MercuryShareAttachmentRenderLocations").isPreview(this.props.location)||!this.props.attachment.uri)return s;return c("React").createElement(c("Link.react"),{className:"_5rw4",href:this.props.attachment.uri,onClick:this.$MercuryFallbackShareAttachment1.bind(this),target:"_blank"},s,this.renderLayers())};r.prototype.render=function(){return this.renderLink(c("React").createElement(c("MercuryFallbackShareAttachmentContent.react"),babelHelpers["extends"]({ref:"mercury_fallback_share_attachment"},this.props)))};r.prototype.$MercuryFallbackShareAttachment1=function(event){__p&&__p();if(this.props.isSponsored){var s=this.props.attachment&&this.props.attachment.subattachments;if(!s)return;for(var t=s,u=Array.isArray(t),v=0,t=u?t:t[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var w;if(u){if(v>=t.length)break;w=t[v++]}else{v=t.next();if(v.done)break;w=v.value}var x=w;new(c("MessengerAdsWebTypedLogger"))().setEvent(c("MNAdsLoggerEventEnum").LINK_CLICK).setIsSponsored(this.props.isSponsored).setItemID(x&&x.id).setMessageID(this.props.messageID).setPageID(this.props.pageID).log()}}if(this.state.nuxDisabled||!this.$MercuryFallbackShareAttachment2())return;this.$MercuryFallbackShareAttachment3();this.interactionTime=0;this.cancelMinConsumeTimeout=setTimeout(function(){if(!this.$MercuryFallbackShareAttachment4())this.setState({showNux:true,nuxDisabled:true})}.bind(this),p);this.cancelMaxConsumeTimeout=setTimeout(function(){if(!this.$MercuryFallbackShareAttachment4()){this.setState({showNux:false,nuxDisabled:false});this.clearTimeouts()}}.bind(this),q);var y=Date.now();this.cancelWindowInteractionTimeout=setTimeout(function(){this.$MercuryFallbackShareAttachment5(function(){if(!this.interactionTime)this.interactionTime=Date.now()-y}.bind(this))}.bind(this),0)};r.prototype.clearTimeouts=function(){__p&&__p();if(this.cancelWindowInteractionTimeout){clearTimeout(this.cancelWindowInteractionTimeout);this.cancelWindowInteractionTimeout=null}if(this.cancelMaxConsumeTimeout){clearTimeout(this.cancelMaxConsumeTimeout);this.cancelMaxConsumeTimeout=null}if(this.cancelMinConsumeTimeout){clearTimeout(this.cancelMinConsumeTimeout);this.cancelMinConsumeTimeout=null}};r.prototype.onNUXCloseButtonClick=function(){this.setState({showNux:false});this.$MercuryFallbackShareAttachment6();this.$MercuryFallbackShareAttachment7();this.clearTimeouts()};r.prototype.renderLayers=function(){return this.$MercuryFallbackShareAttachment2()?c("ReactFragment").create(c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.mercury_fallback_share_attachment}.bind(this),shown:this.state.showNux,onCloseButtonClick:this.onNUXCloseButtonClick.bind(this),position:"below",width:"custom",customwidth:300},i._("Ahora puedes guardar enlaces y v\u00eddeos en Facebook haciendo clic con el bot\u00f3n derecho en un mensaje."))):null};r.prototype.$MercuryFallbackShareAttachment3=function(){if(!this.$MercuryFallbackShareAttachment8){this.$MercuryFallbackShareAttachment9=[];this.$MercuryFallbackShareAttachment8=[Event.listen(window,"click",this.$MercuryFallbackShareAttachment10.bind(this,n)),Event.listen(window,"focus",this.$MercuryFallbackShareAttachment10.bind(this,m)),Event.listen(window,"scroll",this.$MercuryFallbackShareAttachment10.bind(this,o))]}};r.prototype.$MercuryFallbackShareAttachment10=function(s){this.$MercuryFallbackShareAttachment9.forEach(function(t){t.call(this,s)},this)};r.prototype.$MercuryFallbackShareAttachment5=function(s){this.$MercuryFallbackShareAttachment9.push(s)};r.prototype.$MercuryFallbackShareAttachment4=function(){return this.interactionTime&&this.interactionTime>0};r.prototype.$MercuryFallbackShareAttachment7=function(){if(this.$MercuryFallbackShareAttachment8){while(this.$MercuryFallbackShareAttachment8.length)this.$MercuryFallbackShareAttachment8.pop().remove();this.$MercuryFallbackShareAttachment8=null;this.$MercuryFallbackShareAttachment9=null}};r.prototype.$MercuryFallbackShareAttachment2=function(){return c("MessengerDotComSaveModule").eligible_for_nux&&this.$MercuryFallbackShareAttachment11()};r.prototype.$MercuryFallbackShareAttachment11=function(){var s=this.props.attachment;if(!s)return false;var t=s.style_list;return c("SaveMessageUtils").isSavableMessageAttachment(t)};r.prototype.$MercuryFallbackShareAttachment6=function(){new(c("AsyncRequest"))().setURI(c("XMessengerDotComSavedForLaterNuxSeenController").getURIBuilder().getURI()).setData({action:"impression",surface:c("CollectionsDisplaySurface").MESSENGER_DOT_COM_MESSAGE,mechanism:c("CollectionCurationMechanisms").SAVE_MESSAGE_NUX,object_id:this.props.message_id,collection_id:98}).send()};r.propTypes={attachment:c("MercuryShareAttachmentReactShape"),isSponsored:l.bool,location:l.oneOf(c("MercuryShareAttachmentRenderLocations").getValues()),messageID:l.string,pageID:l.string};f.exports=r}),null);
__d("P2PCreditCardForm.react",["CreditCardFormParam","FBPaymentsCreditCardForm_DEPRECATED.react","MessengerPaymentProductType","P2PAPIUtils","P2PAPI","React","getObjectValues"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;function k(){__p&&__p();var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={binError:"",previousBINNumber:"",validateBINRequestID:""},this.handleValidateBINNumberSuccess=function(){this.setState({binError:""})}.bind(this),this.handleValidateBINNumberError=function(q){var r=q.message;this.setState({binError:r})}.bind(this),this.validateBIN=function(q){__p&&__p();var r=void 0,s=void 0;q=q.replace(/ /g,"");r=q.substr(0,6);if(r!==this.state.previousBINNumber&&r.length>=6){s=c("P2PAPIUtils").genRequestID();this.setState({validateBINRequestID:s});c("P2PAPI").validateBINNumber({binNumber:r,requestID:s})}else if(r.length<6)this.setState({binError:"",validateBINRequestID:""});this.setState({previousBINNumber:r})}.bind(this),this.handleValidation=function(q,r){var s=r[c("CreditCardFormParam").CARD_NUMBER];if(!this.props.editMode&&this.props.productType===c("MessengerPaymentProductType").P2P&&s)this.validateBIN(s);this.props.onValidation(q,r)}.bind(this),m}k.prototype.componentWillReceiveProps=function(l){var m=l.asyncRequestState,n=m?m[this.state.validateBINRequestID]:null;if(n){this.setState({validateBINRequestID:""});if(n.error)this.handleValidateBINNumberError(n.error);else this.handleValidateBINNumberSuccess()}};k.prototype.render=function(){return c("React").createElement(c("FBPaymentsCreditCardForm_DEPRECATED.react"),babelHelpers["extends"]({},this.props,{autoTab:true,allowCredit:this.props.productType===c("MessengerPaymentProductType").MESSENGER_COMMERCE,binError:this.state.binError,onValidation:this.handleValidation,postalRegex:this.props.postalRegex}))};k.propTypes={asyncRequestState:j.object,onValidation:j.func.isRequired,postalRegex:j.string,productType:j.oneOf(c("getObjectValues")(c("MessengerPaymentProductType")))};k.defaultProps={asyncRequestState:{},productType:c("MessengerPaymentProductType").P2P};f.exports=k}),null);
__d("P2PAddCreditCardDialog.react",["cx","fbt","CreditCardFormParam","MessengerEnvironment","Link.react","MessengerPaymentProductType","Middot.react","P2PAPI","P2PAPIUtils","P2PPaymentConfig","P2PCreditCardStore","P2PCreditCardForm.react","P2PLoadingMask.react","P2PLogger","P2PPaymentLoggerEvent","P2PLinkConstants","React","P2PButton.react","P2PDialog.react","P2PDialogTitle.react","P2PDialogBody.react","P2PDialogFooter.react","P2PText.react","emptyFunction","getObjectValues"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m="fbP2PAddCreditCardDialog_learnMoreSentenceID";j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={isValid:false,formData:{},loading:false,requestID:"",saveErrors:null,asyncRequestState:{}},this.onCreditCardStoreChange=function(){var t=c("P2PCreditCardStore").getAsyncRequestState(),u=t[this.state.requestID];this.setState({asyncRequestState:t});if(u){this.setState({requestID:""});if(u.error)this.handleOnSaveError(u.error);else this.handleOnSaveSuccess(u)}}.bind(this),this.onSaveClick=function(){var t,u=this.props.p2pPaymentConfig;if(!u){this.setState({loading:false,saveErrors:{general:{message:i._("No se ha podido identificar el pa\u00eds.")}}});return}var v=c("P2PAPIUtils").genRequestID();this.setState({loading:true,requestID:v,saveErrors:null,formData:babelHelpers["extends"]({},this.state.formData,(t={},t[c("CreditCardFormParam").COUNTRY]=u.countryCode,t))},function(){c("P2PAPI").addCreditCard(babelHelpers["extends"]({requestID:v,product_type:this.props.productType},this.state.formData))}.bind(this));this.log(c("P2PPaymentLoggerEvent").UI_ACTN_CONFIRM_CARD_DETAILS)}.bind(this),this.handleValidation=function(t,u){this.setState({isValid:t,formData:u})}.bind(this),this.onToggle=function(t){if(!t){this.props.onCancel();this.log(c("P2PPaymentLoggerEvent").UI_ACTN_CANCEL_ADD_CARD)}}.bind(this),this.onCancelClicked=function(){this.onToggle(false)}.bind(this),p}n.prototype.componentDidMount=function(){this.log(c("P2PPaymentLoggerEvent").UI_ACTN_INITIATE_ADD_CARD);this.creditCardStoreSub=c("P2PCreditCardStore").addListener("change",this.onCreditCardStoreChange)};n.prototype.componentWillUnmount=function(){if(this.creditCardStoreSub){this.creditCardStoreSub.remove();this.creditCardStoreSub=null}};n.prototype.log=function(o,p){c("P2PLogger").log(o,babelHelpers["extends"]({www_event_flow:this.props.eventFlow,object_id:this.props.loggingObjectID},this.props.loggingData,p))};n.prototype.handleOnSaveSuccess=function(o){this.props.onSuccess(o);this.log(c("P2PPaymentLoggerEvent").UI_ACTN_ADD_CARD_SUCCESS)};n.prototype.handleOnSaveError=function(o){this.setState({loading:false,saveErrors:o});this.log(c("P2PPaymentLoggerEvent").UI_ACTN_ADD_CARD_FAIL,{message:o&&o.general?o.general.message:""})};n.prototype.isSaveButtonDisabled=function(){return this.state.loading||!this.state.isValid};n.prototype.renderAddCardForm=function(){var o=this.props.p2pPaymentConfig;if(!o)return null;var p=void 0,q=this.props.title;if(this.props.showCancelButton)p=c("React").createElement(c("P2PButton.react"),{use:"default",size:"medium",label:this.props.cancelButtonText,disabled:this.state.loading,onClick:this.onCancelClicked});return c("React").createElement("div",null,c("React").createElement(c("P2PDialogTitle.react"),null,q),c("React").createElement(c("P2PDialogBody.react"),null,c("React").createElement(c("P2PText.react"),{type:"primary",className:"_3-96"},this.props.text),c("React").createElement(c("P2PCreditCardForm.react"),{asyncRequestState:this.state.asyncRequestState,compactMode:true,onValidation:this.handleValidation,postalRegex:o.postalRegex,productType:this.props.productType,saveErrors:this.state.saveErrors,showIcons:false,showLabels:true,showPlaceholderOnFocus:true,showSecondaryIcons:true,useGutters:true}),c("React").createElement(c("P2PText.react"),{className:"_3-8y",id:m,type:"secondary"},i._("Tu informaci\u00f3n de pago se guardar\u00e1 de forma segura."),c("React").createElement("div",null,c("React").createElement(c("Link.react"),{"aria-describedby":m,href:c("P2PLinkConstants").addDebitCardHelpURI,target:"_blank"},i._("M\u00e1s informaci\u00f3n")),c("React").createElement(c("Middot.react"),null),c("React").createElement(c("Link.react"),{"aria-describedby":m,href:c("P2PLinkConstants").paymentsTermsURI,target:"_blank"},i._("Condiciones"))))),c("React").createElement(c("P2PDialogFooter.react"),{leftContent:this.props.leftContent},p,c("React").createElement(c("P2PButton.react"),{use:"confirm",size:"medium",label:this.props.saveButtonText,disabled:this.isSaveButtonDisabled(),onClick:this.onSaveClick})))};n.prototype.render=function(){if(!this.props.p2pPaymentConfig)return null;return c("React").createElement(c("P2PDialog.react"),{behaviors:this.props.behaviors,layerHideOnBlur:false,ref:"dialog",onToggle:this.onToggle,repositionOnUpdate:true,shown:true,width:this.props.width},this.renderAddCardForm(),c("React").createElement(c("P2PLoadingMask.react"),{visible:this.state.loading}))};n.propTypes={cancelButtonText:l.string,eventFlow:l.string.isRequired,leftContent:l.object,loggingData:l.object,loggingObjectID:l.string,onCancel:l.func,onSuccess:l.func,p2pPaymentConfig:l.shape({currencyCode:l.string.isRequired,enabledActions:l.object.isRequired,enabledPaymentMethods:l.object.isRequired,maxTransferAmount:l.number.isRequired,title:l.string,use_payment_module_method_picker:l.bool,countryCode:l.string.isRequired,postalRegex:l.string.isRequired}).isRequired,productType:l.oneOf(c("getObjectValues")(c("MessengerPaymentProductType"))),saveButtonText:l.string,showCancelButton:l.bool,text:l.string,title:l.string};n.defaultProps={cancelButtonText:i._("Cancelar"),loggingData:{},onCancel:c("emptyFunction"),onSuccess:c("emptyFunction"),p2pPaymentConfig:c("P2PPaymentConfig").config,productType:c("MessengerPaymentProductType").P2P,saveButtonText:i._("Guardar"),showCancelButton:true,text:i._("Introduce una tarjeta de d\u00e9bito Visa o MasterCard. No se pueden usar tarjetas de cr\u00e9dito."),title:i._("A\u00f1adir tarjeta de d\u00e9bito"),width:c("MessengerEnvironment").messengerui?480:430};f.exports=n}),null);
__d("OzDev",["OzConfig","immutable","OzActions","OzHelpers","OzNotify","OzAPI","OzMount","OzStores","OzTwilio"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("immutable").Map;function i(m){c("OzConfig").updateConfig(c("immutable").fromJS(m))}function j(){for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];c("OzConfig").updateConfig(h().setIn(n,!c("OzConfig").getInStaticConfig(n)))}function k(){var k=arguments.length<=0||arguments[0]===undefined?true:arguments[0];c("OzConfig").updateConfig(h({devMode:k}))}document.addEventListener("keydown",function(m){__p&&__p();if(m.which===84&&m.ctrlKey)j("display-tasks");if(m.which===89&&m.ctrlKey)j("GK","timeline");if(m.which===82&&m.ctrlKey&&!m.shiftKey)j("GK","responsivenessV2");if(m.which===82&&m.ctrlKey&&m.shiftKey)j("GK","responsivenessExecTime");if(m.which===79&&m.ctrlKey){j("GK","openTableAPI");var n=c("OzConfig").getInStaticConfig(["GK","openTableAPI"]);c("OzNotify").info("openTableAPI set to "+n)}});function l(){var m=["selectAIPick"];m.map(function(n){c("OzActions")[n].listen(function(){for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return c("OzHelpers").debug("[Action]",n,p)})})}l();f.exports={api:c("OzAPI"),actions:c("OzActions"),config:c("OzConfig"),devMode:k,updateConfig:i,toggleConfig:j,h:c("OzHelpers"),mount:c("OzMount"),stores:c("OzStores"),twilio:c("OzTwilio"),notify:c("OzNotify")}}),null);